create database shiprec;
use shiprec;

create table roles(
	role_id INT PRIMARY KEY AUTO_INCREMENT,
	role VARCHAR(45) NOT NULL);

create table notification_type(
	type_id INT PRIMARY KEY AUTO_INCREMENT,
	type VARCHAR(45) NOT NULL);

create table ports(
	port_id INT PRIMARY KEY AUTO_INCREMENT,
	port_name VARCHAR(45) NOT NULL,
	longitude INT NOT NULL,
	latitude INT NOT NULL);

create table vessel_types(
	type_id INT PRIMARY KEY AUTO_INCREMENT,
	type VARCHAR(45) NOT NULL);

create table vessels(
	vessel_id BIGINT PRIMARY KEY AUTO_INCREMENT,
	vessel_type_id INT NOT NULL,
	name VARCHAR(45) NOT NULL);
ALTER TABLE vessels ADD CONSTRAINT fk_type_id FOREIGN KEY (vessel_type_id) REFERENCES vessel_types(type_id);

create table history(
	timestamp TIMESTAMP NOT NULL,
	trip_id INT DEFAULT 0,
	longitude INT NOT NULL,
	latitude INT NOT NULL,
	vessel_id BIGINT NOT NULL);
ALTER TABLE history ADD CONSTRAINT fk_vessel_id FOREIGN KEY (vessel_id) REFERENCES vessels(vessel_id);

create table users(
	user_id INT PRIMARY KEY AUTO_INCREMENT,
        role_id INT NOT NULL,
        first_name VARCHAR(45) NOT NULL,
        last_name VARCHAR(45) NOT NULL,
        email VARCHAR(45) NOT NULL,
        password VARCHAR(45) NOT NULL,
        country VARCHAR(45) NOT NULL,
        phone_number VARCHAR(45) NOT NULL,
        education VARCHAR(500) NULL,
        creation_timestamp TIMESTAMP NOT NULL,
        notifications_active TINYINT NOT NULL DEFAULT 1);
ALTER TABLE users ADD CONSTRAINT fk_role_id FOREIGN KEY (role_id) REFERENCES roles(role_id);

create table areas(
        area_id INT PRIMARY KEY AUTO_INCREMENT,
        user_id INT NOT NULL,
        area_name VARCHAR(45) NOT NULL,
        area_color INT NOT NULL,
        start_longitude INT NOT NULL,
        start_latitude INT NOT NULL,
        end_longitude INT NOT NULL,
        end_latitude INT NOT NULL);
ALTER TABLE areas ADD CONSTRAINT fk_user_id FOREIGN KEY (user_id) REFERENCES users(user_id);

note: chane column type: ALTER TABLE name MODIFY COLUMN column_name data_type

create table messages(
        message_id INT PRIMARY_KEY AUTO_INCREMENT,
        user_id INT NOT NULL,
        message VARCHAR(500) NOT NULL,
        timestamp TIMESTAMP NOT NULL);
ALTER TABLE messages ADD CONSTRAINT fk_user_id_m FOREIGN KEY (user_id) REFERENCES users(user_id);


create table notifications(
        notification_id INT PRIMARY KEY AUTO_INCREMENT,
        type_id INT NOT NULL,
        user_id INT NOT NULL,
        notification_message VARCHAR(200) NOT NULL,
        timestamp TIMESTAMP NOT NULL);
ALTER TABLE notifications ADD CONSTRAINT fk_user_id_n FOREIGN KEY (user_id) REFERENCES users(user_id);
ALTER TABLE notifications ADD CONSTRAINT fk_type_id_n FOREIGN KEY (type_id) REFERENCES notification_type(type_id);

create table fleets(
        user_id INT NOT NULL,
        vessel_id BIGINT NOT NULL,
        fleet_name VARCHAR(45) NOT NULL);
ALTER TABLE fleets ADD CONSTRAINT fk_user_id_f FOREIGN KEY (user_id) REFERENCES users(user_id);
ALTER TABLE fleets ADD CONSTRAINT fk_vessel_id_f FOREIGN KEY (vessel_id) REFERENC
ES vessels(vessel_id);

